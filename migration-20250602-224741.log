[0;34m[INFO][0m Starting automated NFS-CSI migration script
[0;34m[INFO][0m Log file: /mnt/c/Users/ollie/homeops/migration-20250602-224741.log
[1;33m[WARNING][0m DRY RUN MODE - No changes will be made
[0;34m[INFO][0m Checking prerequisites...
[0;32m[SUCCESS][0m Prerequisites check passed
[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/recyclarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/huntarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/spotarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/wizarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: observability/gatus (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: default/atuin (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: tools/headlamp (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found 21 applications to migrate:
[0;34m[INFO][0m   - [0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: media/recyclarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: media/huntarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: media/spotarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: media/wizarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: observability/gatus (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: default/atuin (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - [0;34m[INFO][0m Found: tools/headlamp (storage: democratic-volsync-nfs)
[0;34m[INFO][0m   - network/technitium
[0;34m[INFO][0m   - security/vaultwarden
[0;34m[INFO][0m   - media/bazarr
[0;34m[INFO][0m   - media/recyclarr
[0;34m[INFO][0m   - media/huntarr
[0;34m[INFO][0m   - media/spotarr
[0;34m[INFO][0m   - media/wizarr
[0;34m[INFO][0m   - observability/gatus
[0;34m[INFO][0m   - default/atuin
[0;34m[INFO][0m   - tools/headlamp
[0;34m[INFO][0m Processing [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;34m[INFO][0m Starting migration of [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Suspending [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage... suspended
[0;34m[INFO][0m Updating kustomization for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[1;33m[WARNING][0m Kustomization file not found: kubernetes/apps/[0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage.../ks.yaml, trying alternative paths...
[0;31m[ERROR][0m No kustomization file found for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Creating migration ReplicationDestination for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Recreating PVC for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;32m[SUCCESS][0m PVC recreated for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Force reconciling Flux resources for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;32m[SUCCESS][0m Flux resources reconciled for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Resuming [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage......
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage... resumed
[0;34m[INFO][0m Verifying [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage... health...
[0;32m[SUCCESS][0m Migration completed for [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;32m[SUCCESS][0m âœ… [0;34m[INFO][0m Scanning for applications using democratic-csi storage.../[0;34m[INFO][0m Scanning for applications using democratic-csi storage... migration successful
[0;34m[INFO][0m Processing [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;34m[INFO][0m Starting migration of [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Suspending [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs) suspended
[0;34m[INFO][0m Updating kustomization for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[1;33m[WARNING][0m Kustomization file not found: kubernetes/apps/[0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)/ks.yaml, trying alternative paths...
[0;31m[ERROR][0m No kustomization file found for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Creating migration ReplicationDestination for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Recreating PVC for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m PVC recreated for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Force reconciling Flux resources for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Flux resources reconciled for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Resuming [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs) resumed
[0;34m[INFO][0m Verifying [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs) health...
[0;32m[SUCCESS][0m Migration completed for [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;32m[SUCCESS][0m âœ… [0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs) migration successful
[0;34m[INFO][0m Processing [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;34m[INFO][0m Starting migration of [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Suspending [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs) suspended
[0;34m[INFO][0m Updating kustomization for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[1;33m[WARNING][0m Kustomization file not found: kubernetes/apps/[0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)/ks.yaml, trying alternative paths...
[0;31m[ERROR][0m No kustomization file found for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Creating migration ReplicationDestination for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Recreating PVC for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m PVC recreated for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Force reconciling Flux resources for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Flux resources reconciled for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Resuming [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)...
[0;32m[SUCCESS][0m Application [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs) resumed
[0;34m[INFO][0m Verifying [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs) health...
[0;32m[SUCCESS][0m Migration completed for [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;32m[SUCCESS][0m âœ… [0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs) migration successful
[0;34m[INFO][0m Processing [0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)...
[0;34m[INFO][0m Starting migration of [0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Suspending [0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)...
