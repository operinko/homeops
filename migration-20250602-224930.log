[0;34m[INFO][0m Starting automated NFS-CSI migration script
[0;34m[INFO][0m Log file: /mnt/c/Users/ollie/homeops/migration-20250602-224930.log
[1;33m[WARNING][0m DRY RUN MODE - No changes will be made
[0;34m[INFO][0m Checking prerequisites...
[0;32m[SUCCESS][0m Prerequisites check passed
[0;34m[INFO][0m Scanning for applications using democratic-csi storage...
[0;34m[INFO][0m Found: network/technitium (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: security/vaultwarden (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/bazarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/recyclarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/huntarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/spotarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: media/wizarr (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: observability/gatus (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: default/atuin (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found: tools/headlamp (storage: democratic-volsync-nfs)
[0;34m[INFO][0m Found 10 applications to migrate:
[0;34m[INFO][0m   - network/technitium
[0;34m[INFO][0m   - security/vaultwarden
[0;34m[INFO][0m   - media/bazarr
[0;34m[INFO][0m   - media/recyclarr
[0;34m[INFO][0m   - media/huntarr
[0;34m[INFO][0m   - media/spotarr
[0;34m[INFO][0m   - media/wizarr
[0;34m[INFO][0m   - observability/gatus
[0;34m[INFO][0m   - default/atuin
[0;34m[INFO][0m   - tools/headlamp
[0;34m[INFO][0m Processing network/technitium...
[0;34m[INFO][0m Starting migration of network/technitium
[0;34m[INFO][0m Suspending network/technitium...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application network/technitium suspended
[0;34m[INFO][0m Updating kustomization for network/technitium...
[0;32m[SUCCESS][0m Kustomization updated for network/technitium
[0;34m[INFO][0m Creating migration ReplicationDestination for network/technitium...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for network/technitium
[0;34m[INFO][0m Recreating PVC for network/technitium...
[0;32m[SUCCESS][0m PVC recreated for network/technitium
[0;34m[INFO][0m Force reconciling Flux resources for network/technitium...
[0;32m[SUCCESS][0m Flux resources reconciled for network/technitium
[0;34m[INFO][0m Resuming network/technitium...
[0;32m[SUCCESS][0m Application network/technitium resumed
[0;34m[INFO][0m Verifying network/technitium health...
[0;32m[SUCCESS][0m Migration completed for network/technitium
[0;32m[SUCCESS][0m âœ… network/technitium migration successful
[0;34m[INFO][0m Processing security/vaultwarden...
[0;34m[INFO][0m Starting migration of security/vaultwarden
[0;34m[INFO][0m Suspending security/vaultwarden...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application security/vaultwarden suspended
[0;34m[INFO][0m Updating kustomization for security/vaultwarden...
[0;32m[SUCCESS][0m Kustomization updated for security/vaultwarden
[0;34m[INFO][0m Creating migration ReplicationDestination for security/vaultwarden...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for security/vaultwarden
[0;34m[INFO][0m Recreating PVC for security/vaultwarden...
[0;32m[SUCCESS][0m PVC recreated for security/vaultwarden
[0;34m[INFO][0m Force reconciling Flux resources for security/vaultwarden...
[0;32m[SUCCESS][0m Flux resources reconciled for security/vaultwarden
[0;34m[INFO][0m Resuming security/vaultwarden...
[0;32m[SUCCESS][0m Application security/vaultwarden resumed
[0;34m[INFO][0m Verifying security/vaultwarden health...
[0;32m[SUCCESS][0m Migration completed for security/vaultwarden
[0;32m[SUCCESS][0m âœ… security/vaultwarden migration successful
[0;34m[INFO][0m Processing media/bazarr...
[0;34m[INFO][0m Starting migration of media/bazarr
[0;34m[INFO][0m Suspending media/bazarr...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application media/bazarr suspended
[0;34m[INFO][0m Updating kustomization for media/bazarr...
[0;32m[SUCCESS][0m Kustomization updated for media/bazarr
[0;34m[INFO][0m Creating migration ReplicationDestination for media/bazarr...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for media/bazarr
[0;34m[INFO][0m Recreating PVC for media/bazarr...
[0;32m[SUCCESS][0m PVC recreated for media/bazarr
[0;34m[INFO][0m Force reconciling Flux resources for media/bazarr...
[0;32m[SUCCESS][0m Flux resources reconciled for media/bazarr
[0;34m[INFO][0m Resuming media/bazarr...
[0;32m[SUCCESS][0m Application media/bazarr resumed
[0;34m[INFO][0m Verifying media/bazarr health...
[0;32m[SUCCESS][0m Migration completed for media/bazarr
[0;32m[SUCCESS][0m âœ… media/bazarr migration successful
[0;34m[INFO][0m Processing media/recyclarr...
[0;34m[INFO][0m Starting migration of media/recyclarr
[0;34m[INFO][0m Suspending media/recyclarr...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application media/recyclarr suspended
[0;34m[INFO][0m Updating kustomization for media/recyclarr...
[0;32m[SUCCESS][0m Kustomization updated for media/recyclarr
[0;34m[INFO][0m Creating migration ReplicationDestination for media/recyclarr...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for media/recyclarr
[0;34m[INFO][0m Recreating PVC for media/recyclarr...
[0;32m[SUCCESS][0m PVC recreated for media/recyclarr
[0;34m[INFO][0m Force reconciling Flux resources for media/recyclarr...
[0;32m[SUCCESS][0m Flux resources reconciled for media/recyclarr
[0;34m[INFO][0m Resuming media/recyclarr...
[0;32m[SUCCESS][0m Application media/recyclarr resumed
[0;34m[INFO][0m Verifying media/recyclarr health...
[0;32m[SUCCESS][0m Migration completed for media/recyclarr
[0;32m[SUCCESS][0m âœ… media/recyclarr migration successful
[0;34m[INFO][0m Processing media/huntarr...
[0;34m[INFO][0m Starting migration of media/huntarr
[0;34m[INFO][0m Suspending media/huntarr...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application media/huntarr suspended
[0;34m[INFO][0m Updating kustomization for media/huntarr...
[0;32m[SUCCESS][0m Kustomization updated for media/huntarr
[0;34m[INFO][0m Creating migration ReplicationDestination for media/huntarr...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for media/huntarr
[0;34m[INFO][0m Recreating PVC for media/huntarr...
[0;32m[SUCCESS][0m PVC recreated for media/huntarr
[0;34m[INFO][0m Force reconciling Flux resources for media/huntarr...
[0;32m[SUCCESS][0m Flux resources reconciled for media/huntarr
[0;34m[INFO][0m Resuming media/huntarr...
[0;32m[SUCCESS][0m Application media/huntarr resumed
[0;34m[INFO][0m Verifying media/huntarr health...
[0;32m[SUCCESS][0m Migration completed for media/huntarr
[0;32m[SUCCESS][0m âœ… media/huntarr migration successful
[0;34m[INFO][0m Processing media/spotarr...
[0;34m[INFO][0m Starting migration of media/spotarr
[0;34m[INFO][0m Suspending media/spotarr...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application media/spotarr suspended
[0;34m[INFO][0m Updating kustomization for media/spotarr...
[0;32m[SUCCESS][0m Kustomization updated for media/spotarr
[0;34m[INFO][0m Creating migration ReplicationDestination for media/spotarr...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for media/spotarr
[0;34m[INFO][0m Recreating PVC for media/spotarr...
[0;32m[SUCCESS][0m PVC recreated for media/spotarr
[0;34m[INFO][0m Force reconciling Flux resources for media/spotarr...
[0;32m[SUCCESS][0m Flux resources reconciled for media/spotarr
[0;34m[INFO][0m Resuming media/spotarr...
[0;32m[SUCCESS][0m Application media/spotarr resumed
[0;34m[INFO][0m Verifying media/spotarr health...
[0;32m[SUCCESS][0m Migration completed for media/spotarr
[0;32m[SUCCESS][0m âœ… media/spotarr migration successful
[0;34m[INFO][0m Processing media/wizarr...
[0;34m[INFO][0m Starting migration of media/wizarr
[0;34m[INFO][0m Suspending media/wizarr...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application media/wizarr suspended
[0;34m[INFO][0m Updating kustomization for media/wizarr...
[0;32m[SUCCESS][0m Kustomization updated for media/wizarr
[0;34m[INFO][0m Creating migration ReplicationDestination for media/wizarr...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for media/wizarr
[0;34m[INFO][0m Recreating PVC for media/wizarr...
[0;32m[SUCCESS][0m PVC recreated for media/wizarr
[0;34m[INFO][0m Force reconciling Flux resources for media/wizarr...
[0;32m[SUCCESS][0m Flux resources reconciled for media/wizarr
[0;34m[INFO][0m Resuming media/wizarr...
[0;32m[SUCCESS][0m Application media/wizarr resumed
[0;34m[INFO][0m Verifying media/wizarr health...
[0;32m[SUCCESS][0m Migration completed for media/wizarr
[0;32m[SUCCESS][0m âœ… media/wizarr migration successful
[0;34m[INFO][0m Processing observability/gatus...
[0;34m[INFO][0m Starting migration of observability/gatus
[0;34m[INFO][0m Suspending observability/gatus...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application observability/gatus suspended
[0;34m[INFO][0m Updating kustomization for observability/gatus...
[0;32m[SUCCESS][0m Kustomization updated for observability/gatus
[0;34m[INFO][0m Creating migration ReplicationDestination for observability/gatus...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for observability/gatus
[0;34m[INFO][0m Recreating PVC for observability/gatus...
[0;32m[SUCCESS][0m PVC recreated for observability/gatus
[0;34m[INFO][0m Force reconciling Flux resources for observability/gatus...
[0;32m[SUCCESS][0m Flux resources reconciled for observability/gatus
[0;34m[INFO][0m Resuming observability/gatus...
[0;32m[SUCCESS][0m Application observability/gatus resumed
[0;34m[INFO][0m Verifying observability/gatus health...
[0;32m[SUCCESS][0m Migration completed for observability/gatus
[0;32m[SUCCESS][0m âœ… observability/gatus migration successful
[0;34m[INFO][0m Processing default/atuin...
[0;34m[INFO][0m Starting migration of default/atuin
[0;34m[INFO][0m Suspending default/atuin...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application default/atuin suspended
[0;34m[INFO][0m Updating kustomization for default/atuin...
[0;32m[SUCCESS][0m Kustomization updated for default/atuin
[0;34m[INFO][0m Creating migration ReplicationDestination for default/atuin...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for default/atuin
[0;34m[INFO][0m Recreating PVC for default/atuin...
[0;32m[SUCCESS][0m PVC recreated for default/atuin
[0;34m[INFO][0m Force reconciling Flux resources for default/atuin...
[0;32m[SUCCESS][0m Flux resources reconciled for default/atuin
[0;34m[INFO][0m Resuming default/atuin...
[0;32m[SUCCESS][0m Application default/atuin resumed
[0;34m[INFO][0m Verifying default/atuin health...
[0;32m[SUCCESS][0m Migration completed for default/atuin
[0;32m[SUCCESS][0m âœ… default/atuin migration successful
[0;34m[INFO][0m Processing tools/headlamp...
[0;34m[INFO][0m Starting migration of tools/headlamp
[0;34m[INFO][0m Suspending tools/headlamp...
[0;34m[INFO][0m ReplicationSource suspended
[0;34m[INFO][0m HelmRelease suspended
[0;32m[SUCCESS][0m Application tools/headlamp suspended
[0;34m[INFO][0m Updating kustomization for tools/headlamp...
[0;32m[SUCCESS][0m Kustomization updated for tools/headlamp
[0;34m[INFO][0m Creating migration ReplicationDestination for tools/headlamp...
[0;32m[SUCCESS][0m Migration ReplicationDestination completed for tools/headlamp
[0;34m[INFO][0m Recreating PVC for tools/headlamp...
[0;32m[SUCCESS][0m PVC recreated for tools/headlamp
[0;34m[INFO][0m Force reconciling Flux resources for tools/headlamp...
[0;32m[SUCCESS][0m Flux resources reconciled for tools/headlamp
[0;34m[INFO][0m Resuming tools/headlamp...
[0;32m[SUCCESS][0m Application tools/headlamp resumed
[0;34m[INFO][0m Verifying tools/headlamp health...
[0;32m[SUCCESS][0m Migration completed for tools/headlamp
[0;32m[SUCCESS][0m âœ… tools/headlamp migration successful
[0;34m[INFO][0m ðŸŽ¯ MIGRATION SUMMARY
[0;34m[INFO][0m ====================
[0;34m[INFO][0m Total applications: 10
[0;34m[INFO][0m Successful: 10
[0;34m[INFO][0m Failed: 0
[0;32m[SUCCESS][0m Successful migrations:
[0;32m[SUCCESS][0m   âœ… network/technitium
[0;32m[SUCCESS][0m   âœ… security/vaultwarden
[0;32m[SUCCESS][0m   âœ… media/bazarr
[0;32m[SUCCESS][0m   âœ… media/recyclarr
[0;32m[SUCCESS][0m   âœ… media/huntarr
[0;32m[SUCCESS][0m   âœ… media/spotarr
[0;32m[SUCCESS][0m   âœ… media/wizarr
[0;32m[SUCCESS][0m   âœ… observability/gatus
[0;32m[SUCCESS][0m   âœ… default/atuin
[0;32m[SUCCESS][0m   âœ… tools/headlamp
[0;32m[SUCCESS][0m ðŸŽ‰ All applications migrated successfully to NFS-CSI storage!
[0;34m[INFO][0m Next steps:
[0;34m[INFO][0m   1. Monitor applications for stability
[0;34m[INFO][0m   2. Verify backup schedules are working
[0;34m[INFO][0m   3. Clean up old democratic-csi resources when confident
