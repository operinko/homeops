---
# ClusterExternalSecret for alertmanager-pushover
# Pushes pushover credentials to all namespaces for AlertmanagerConfig
apiVersion: external-secrets.io/v1
kind: ClusterExternalSecret
metadata:
  name: alertmanager-pushover
spec:
  namespaceSelector:
    matchExpressions:
      - key: kubernetes.io/metadata.name
        operator: Exists
  refreshTime: 1m
  externalSecretSpec:
    refreshInterval: 1h
    target:
      name: alertmanager-pushover
      creationPolicy: Owner
      deletionPolicy: Retain
    data:
      - secretKey: pushover_token
        sourceRef:
          storeRef:
            name: bitwarden-fields
            kind: ClusterSecretStore
        remoteRef:
          key: bc506d55-fb13-4a17-9506-593d6eaa87b7
          property: pushover_token
      - secretKey: pushover_user
        sourceRef:
          storeRef:
            name: bitwarden-fields
            kind: ClusterSecretStore
        remoteRef:
          key: bc506d55-fb13-4a17-9506-593d6eaa87b7
          property: pushover_user
---
# ClusterExternalSecret for alertmanager-discord
# Pushes discord webhook to all namespaces for AlertmanagerConfig
apiVersion: external-secrets.io/v1
kind: ClusterExternalSecret
metadata:
  name: alertmanager-discord
spec:
  namespaceSelector:
    matchExpressions:
      - key: kubernetes.io/metadata.name
        operator: Exists
  refreshTime: 1m
  externalSecretSpec:
    refreshInterval: 1h
    target:
      name: alertmanager-discord
      creationPolicy: Owner
      deletionPolicy: Retain
    data:
      - secretKey: webhook
        sourceRef:
          storeRef:
            name: bitwarden-fields
            kind: ClusterSecretStore
        remoteRef:
          key: bc506d55-fb13-4a17-9506-593d6eaa87b7
          property: discord_webhook
