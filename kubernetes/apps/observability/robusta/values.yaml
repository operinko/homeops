# Robusta values
clusterName: "homeops"
enableHolmesGPT: true
enablePlatformPlaybooks: true
enablePrometheusStack: false
enabledManagedConfiguration: true
globalConfig:
  signing_key: "{{ env.SIGNING_KEY }}"
  prometheus_url: "http://kube-prometheus-stack-prometheus.observability.svc.cluster.local:9090"
  alertmanager_url: "http://kube-prometheus-stack-alertmanager.observability.svc.cluster.local:9093"
holmes:
  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      memory: "1Gi"
  # Attempting standard probe overrides
  livenessProbe:
    initialDelaySeconds: 300
    periodSeconds: 20
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 300
    periodSeconds: 20
    failureThreshold: 3
  additionalEnvVars:
    - name: ROBUSTA_AI
      value: "true"
    - name: ROBUSTA_UI_TOKEN
      valueFrom:
        secretKeyRef:
          key: ROBUSTA_UI_TOKEN
          name: robusta-secrets
    - name: OLLAMA_API_BASE
      value: "http://192.168.0.89:11434"
    - name: ACCOUNT_ID
      valueFrom:
        secretKeyRef:
          key: account_id
          name: robusta-secrets
    - name: SIGNING_KEY
      valueFrom:
        secretKeyRef:
          key: signing_key
          name: robusta-secrets
    - name: ARGOCD_AUTH_TOKEN
      valueFrom:
        secretKeyRef:
          key: ARGOCD_AUTH_TOKEN
          name: robusta-secrets
  toolsets:
    argocd/core:
      enabled: true
    kubernetes/live-metrics:
      enabled: true
    kubernetes/kube-prometheus-stack:
      enabled: true
    kubernetes/kube-lineage-extras:
      enabled: true
  # Configure at least one model using modelList
  modelList:
    ollama-llama3:
      api_base: "{{ env.OLLAMA_API_BASE }}"
      model: ollama_chat/llama3
      temperature: 1
    ollama-codellama:
      api_base: "{{ env.OLLAMA_API_BASE }}"
      model: ollama_chat/codellama
      temperature: 1
is_small_cluster: true
runner:
  podAnnotations:
    goldilocks.fairwinds.com/enabled: "false"
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      memory: "3Gi"
  sendAdditionalTelemetry: true
  additional_env_vars:
    - name: ROBUSTA_UI_TOKEN
      valueFrom:
        secretKeyRef:
          key: ROBUSTA_UI_TOKEN
          name: robusta-secrets
    - name: ACCOUNT_ID
      valueFrom:
        secretKeyRef:
          key: account_id
          name: robusta-secrets
    - name: SIGNING_KEY
      valueFrom:
        secretKeyRef:
          key: signing_key
          name: robusta-secrets
sinksConfig:
  - robusta_sink:
      name: robusta_ui_sink
      token: "{{ env.ROBUSTA_UI_TOKEN }}"
