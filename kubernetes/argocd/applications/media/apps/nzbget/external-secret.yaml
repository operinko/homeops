---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: nzbget-secret
  namespace: media
spec:
  refreshInterval: 1h
  target:
    name: nzbget-secret
    creationPolicy: Owner
    deletionPolicy: Retain
  data:
    # Reuse SABnzbd API keys for easier migration
    # NZBGet will use the same API key as SABnzbd
    - secretKey: NZBGET_API_KEY
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 824520b6-a6a5-40e4-aa5d-a8b4a9a9c30a
        property: apikey
    - secretKey: NZBGET_NZB_KEY
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 824520b6-a6a5-40e4-aa5d-a8b4a9a9c30a
        property: nzbkey

