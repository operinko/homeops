---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: maintainerr-secret
  namespace: media
spec:
  refreshInterval: 1h
  target:
    name: maintainerr-secret
    creationPolicy: Owner
    deletionPolicy: Retain
  data:
    # Plex Token (reuse from existing secret)
    - secretKey: PLEX_TOKEN
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 4987f987-a524-4d64-b65a-1573e517cf27
        property: password
    
    # Sonarr API Key
    - secretKey: SONARR_API_KEY
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: e03f65ab-346b-42c0-839e-045ead3a2227
        property: apikey
    
    # Radarr API Key
    - secretKey: RADARR_API_KEY
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 923a828e-9898-444f-b680-0f33e16aabfa
        property: apikey
    
    # Tautulli API Key - TODO: Add to Bitwarden
    # - secretKey: TAUTULLI_API_KEY
    #   sourceRef:
    #     storeRef:
    #       name: bitwarden-fields
    #       kind: ClusterSecretStore
    #   remoteRef:
    #     key: <TAUTULLI_BITWARDEN_ID>
    #     property: apikey
    
    # Overseerr API Key - TODO: Add to Bitwarden
    # - secretKey: OVERSEERR_API_KEY
    #   sourceRef:
    #     storeRef:
    #       name: bitwarden-fields
    #       kind: ClusterSecretStore
    #   remoteRef:
    #     key: <OVERSEERR_BITWARDEN_ID>
    #     property: apikey

